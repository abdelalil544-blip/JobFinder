<section class="space-y-6">
  <header class="space-y-2">
    <p class="text-xs font-semibold uppercase tracking-[0.2em] text-[color:var(--teal-700)]">
      Recherche
    </p>
    <h1 class="font-display text-3xl text-[color:var(--ink-950)]">Offres d'emploi</h1>
    <p class="text-sm text-[color:var(--ink-700)]">
      Filtrez par titre et localisation pour trouver rapidement des opportunites.
    </p>
  </header>

  <div class="glass-card rounded-3xl p-6">
    <form
      class="grid gap-4 md:grid-cols-[1fr_1fr_0.8fr_auto]"
      [formGroup]="form"
      (ngSubmit)="onSearch()"
    >
      <label class="grid gap-2 text-sm font-semibold text-[color:var(--ink-700)]">
        Mot cle
        <input
          class="rounded-2xl border border-black/10 bg-white/80 px-4 py-3 text-sm focus:border-[color:var(--teal-600)] focus:outline-none"
          type="text"
          formControlName="keywords"
          placeholder="ex: developpeur frontend"
        />
      </label>

      <label class="grid gap-2 text-sm font-semibold text-[color:var(--ink-700)]">
        Localisation
        <input
          class="rounded-2xl border border-black/10 bg-white/80 px-4 py-3 text-sm focus:border-[color:var(--teal-600)] focus:outline-none"
          type="text"
          formControlName="location"
          placeholder="ex: remote, Paris (optionnel)"
        />
      </label>

      <label class="grid gap-2 text-sm font-semibold text-[color:var(--ink-700)]">
        Pays
        <select
          class="rounded-2xl border border-black/10 bg-white/80 px-4 py-3 text-sm focus:border-[color:var(--teal-600)] focus:outline-none"
          formControlName="country"
        >
          <option value="fr">France</option>
          <option value="gb">Royaume-Uni</option>
          <option value="us">Etats-Unis</option>
          <option value="de">Allemagne</option>
          <option value="ca">Canada</option>
        </select>
      </label>

      <button
        class="h-[52px] rounded-2xl bg-[color:var(--teal-600)] px-5 text-sm font-semibold text-white shadow-lg transition hover:bg-[color:var(--teal-700)]"
        type="submit"
      >
        Rechercher
      </button>
    </form>

    <p
      class="mt-3 text-xs text-[color:#b42318]"
      *ngIf="form.touched && (form.invalid || !form.get('keywords')?.value?.trim())"
    >
      Merci de renseigner au moins un mot cle et un pays.
    </p>
  </div>

  <div class="space-y-4">
    <div class="flex flex-wrap items-center justify-between gap-3">
      <p class="text-sm text-[color:var(--ink-700)]">
        Page {{ currentPage }} / {{ totalPages }}
      </p>
      <div class="flex items-center gap-2 text-xs text-[color:var(--ink-500)]" *ngIf="loading">
        <span class="h-2 w-2 animate-pulse rounded-full bg-[color:var(--teal-600)]"></span>
        Chargement des offres...
      </div>
    </div>

    <p class="text-sm text-[color:#b42318]" *ngIf="errorMessage">{{ errorMessage }}</p>

    <div class="grid gap-4" *ngIf="!loading">
      <app-job-card *ngFor="let job of jobs; trackBy: trackById" [job]="job"></app-job-card>
    </div>

    <p class="text-sm text-[color:var(--ink-500)]" *ngIf="!loading && jobs.length === 0 && !errorMessage">
      Aucune offre trouvee pour cette recherche.
    </p>

    <div class="mt-4 flex flex-wrap items-center justify-between gap-3" *ngIf="totalPages > 1">
      <button
        class="rounded-full border border-black/10 px-4 py-2 text-xs font-semibold text-[color:var(--ink-700)] transition disabled:cursor-not-allowed disabled:opacity-50"
        type="button"
        (click)="goToPage(currentPage - 1)"
        [disabled]="currentPage === 1"
      >
        Precedent
      </button>

      <div class="flex flex-wrap items-center gap-2">
        <button
          *ngFor="let page of pages"
          class="h-9 w-9 rounded-full border text-xs font-semibold"
          [class.border-[color:var(--teal-600)]]="page === currentPage"
          [class.text-[color:var(--teal-700)]]="page === currentPage"
          [class.border-black/10]="page !== currentPage"
          [class.text-[color:var(--ink-500)]]="page !== currentPage"
          type="button"
          (click)="goToPage(page)"
        >
          {{ page }}
        </button>
      </div>

      <button
        class="rounded-full border border-black/10 px-4 py-2 text-xs font-semibold text-[color:var(--ink-700)] transition disabled:cursor-not-allowed disabled:opacity-50"
        type="button"
        (click)="goToPage(currentPage + 1)"
        [disabled]="currentPage === totalPages"
      >
        Suivant
      </button>
    </div>
  </div>
</section>
